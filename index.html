<html>
<head>
  <script type="text/javascript">
    
    let HOST = "wss://bar-app-websocket-server.herokuapp.com/"
    let ws = new WebSocket(HOST);
    let el;


    // 接続した際のコールバック
    ws.onopen = () => {
      console.log('WebSocket 接続成功');
    };

    ws.onmessage = (event) => {
      const blocks = document.querySelector('#blocks');
      // blocks.innerHTML += event.data;
      console.log(event.data);
      var tempData = JSON.parse(event.data);
      console.log(tempData.msg)
      if(tempData.msg.includes("sigfox_motion") && tempData.msg.includes("yes")){        
        blocks.innerHTML = event.data;
        document.body.style.backgroundColor = "#606061";
        blocks.innerHTML = "モーションあり"
        blocks.style.color = "#FFF";
      }else if(tempData.msg.includes("sigfox_motion") && tempData.msg.includes("no")){
        document.body.style.backgroundColor = "#a9a9ab";
        blocks.innerHTML = "モーションなし";
        blocks.style.color = "#000";
      }
    };
  
  </script>
</head>


<body>
  <div id="container">
    <h2>HI2</h2>
    <div id = "blocks"></div>
  </div>
</body>
</html>